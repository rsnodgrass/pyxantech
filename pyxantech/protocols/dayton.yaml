# FROM @kbrown01


- protocol: dayton
  name: "Dayton Audio 8-Zone Amp Protocol" #Same as monoprice with extra zones

  connection:
    rs232:
      baud: 9600
      data: 8
      parity: N
      stop: 1

  limits:
    volume:
      min: 0
      max: 38
    treble:
      min: 0
      max: 14
    bass:
      min: 0
      max: 14
    balance:
      min: 0
      max: 20
    source: # technically limited by hardware series yaml, not protocol
      min: 1
      max: 8
    zone: # technically limited by hardware series yaml, not protocol
      min: 1
      max: 8

  command_eol: "\r"
  command_separator: ""

  commands:
    zone_status:   '?{zone:02d}'

    set_power:     '<{zone:02d}PR{power:02d}'  # power: 1 = on; 0 = off
    power_on:      '<{zone:02d}PR01'
    power_off:     '<{zone:02d}PR00'

    set_mute:      '<{zone:02d}MU{mute:02d}'   # mute: 1 = on; 0 = off
    mute_on:       '<{zone:02d}MU01'
    mute_off:      '<{zone:02d}MU00'

    set_volume:    '<{zone:02d}VO{volume:02d}'    # volume: 0-38
    set_treble:    '<{zone:02d}TR{treble:02d}'    # treble: 0-14
    set_bass:      '<{zone:02d}BS{bass:02d}'      # bass: 0-14
    set_balance:   '<{zone:02d}BL{balance:02d}'   # balance: 0-20
    set_source:    '<{zone:02d}CH{source:02d}'    # source: 1-8

  response_eol: "\r"

  responses:
    zone_status: '>(?P<zone>\d\d)(?P<unknown>\d\d)(?P<power>[01]{2})(?P<mute>[01]{2})(?P<do_not_disturb>[01]{2})(?P<volume>\d\d)(?P<treble>\d\d)(?P<bass>\d\d)(?P<balance>\d\d)(?P<source>\d\d)(?P<keypad>\d\d)'

  extras:
    restore_zone:    [ 'set_power', 'set_source', 'set_volume', 'set_mute', 'set_bass', 'set_balance', 'set_treble' ]
    restore_success: "OK\r"
